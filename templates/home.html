{% extends 'base.html' %}

{% block title %}Holistic Engine - O Software Mais Avançado do Corpo Humano{% endblock %}

{% block content %}
<!-- HERO SECTION with 3D Animation Background -->
<div class="relative min-h-[80vh] flex items-center justify-center overflow-hidden -mt-8 mb-12">
    <!-- Animated Background -->
    <div class="absolute inset-0 bg-gradient-to-br from-black via-purple-900/20 to-black"></div>

    <!-- Floating Particles -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse"
            style="animation-delay: 1s"></div>
        <div class="absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl animate-pulse"
            style="animation-delay: 2s"></div>
    </div>

    <!-- DNA Helix Animation (CSS) -->
    <div class="absolute left-10 h-full opacity-20">
        <div class="dna-strand"></div>
    </div>
    <div class="absolute right-10 h-full opacity-20">
        <div class="dna-strand" style="animation-delay: -5s"></div>
    </div>

    <!-- Main Content -->
    <div class="relative z-10 text-center px-4 max-w-4xl">
        <div class="mb-6">
            <span
                class="px-4 py-2 bg-cyan-900/30 text-cyan-400 text-[10px] uppercase tracking-[0.3em] rounded border border-cyan-500/30">
                SYSTEM VER 5.0 // MEGA BRAIN // PUBMED LINK
            </span>
        </div>

        <h1 class="text-5xl md:text-7xl font-mystic mb-6 leading-tight tracking-widest">
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-gray-100 via-cyan-100 to-gray-400">
                HOLISTIC ENGINE
            </span>
        </h1>

        <p class="text-lg md:text-xl text-gray-400 mb-8 font-light max-w-2xl mx-auto">
            O hub definitivo de integração bioconsciente. Unificando <span class="text-cyan-400 font-medium">Anatomia
                Holográfica</span>,
            <span class="text-purple-400 font-medium">Frequências Sensoriais</span> e a precisão da
            <span class="text-green-400 font-medium">Ciência Clínica</span>.
        </p>

        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <a href="/holograma/"
                class="group px-8 py-4 bg-cyan-900/40 border border-cyan-500/50 rounded flex items-center justify-center gap-3 font-semibold text-cyan-50 hover:bg-cyan-800/60 transition-all hover:scale-105">
                <i data-feather="box" class="w-5 h-5"></i> INICIALIZAR HOLOGRAMA
            </a>
            <a href="/galaxy/"
                class="group px-8 py-4 bg-transparent border border-white/10 rounded flex items-center justify-center gap-3 font-semibold text-gray-300 hover:text-white hover:border-white/30 transition-all">
                <i data-feather="share-2" class="w-5 h-5 group-hover:text-purple-400 transition-colors"></i> REDE NEURAL
                GALAXY
            </a>
        </div>

        <!-- Stats -->
        <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
            <div class="glass-card p-4">
                <div class="text-3xl font-bold text-cyan-400">15+</div>
                <div class="text-xs text-gray-400">Órgãos 3D</div>
            </div>
            <div class="glass-card p-4">
                <div class="text-3xl font-bold text-purple-400">500+</div>
                <div class="text-xs text-gray-400">Entidades Mapeadas</div>
            </div>
            <div class="glass-card p-4">
                <div class="text-3xl font-bold text-green-400">∞</div>
                <div class="text-xs text-gray-400">Estudos PubMed</div>
            </div>
            <div class="glass-card p-4">
                <div class="text-3xl font-bold text-pink-400">7</div>
                <div class="text-xs text-gray-400">Chakras Ativos</div>
            </div>
        </div>
    </div>
</div>

<!-- FEATURE CARDS SECTION -->
<div class="max-w-7xl mx-auto px-4 mb-20 relative z-10">
    <div class="flex items-center gap-4 mb-10 justify-center">
        <div class="h-px bg-cyan-900 flex-grow max-w-[100px]"></div>
        <h2 class="text-sm font-bold tracking-[0.3em] uppercase text-cyan-500">
            Sistemas Ativos
        </h2>
        <div class="h-px bg-cyan-900 flex-grow max-w-[100px]"></div>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- 3D Hologram Card -->
        <a href="/holograma/"
            class="group glass-card p-6 border-t border-cyan-500/50 hover:border-cyan-400 flex flex-col items-start transition-all">
            <div class="text-cyan-400 mb-6 bg-cyan-900/30 p-3 rounded"><i data-feather="hexagon" class="w-6 h-6"></i>
            </div>
            <h3 class="text-lg font-bold text-white mb-2 font-mystic tracking-wider">MOTOR 3D</h3>
            <p class="text-gray-400 text-xs mb-6 leading-relaxed flex-grow">Mapeamento em WebGL. Zoom, rotação e
                inspeção celular em tempo real.</p>
            <div class="flex items-center text-cyan-400 text-xs font-bold tracking-widest uppercase">
                Acessar <i data-feather="chevron-right"
                    class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"></i>
            </div>
        </a>

        <!-- Galaxy View Card -->
        <a href="/galaxy/"
            class="group glass-card p-6 border-t border-purple-500/50 hover:border-purple-400 flex flex-col items-start transition-all">
            <div class="text-purple-400 mb-6 bg-purple-900/30 p-3 rounded"><i data-feather="share-2"
                    class="w-6 h-6"></i></div>
            <h3 class="text-lg font-bold text-white mb-2 font-mystic tracking-wider">NEURAL NET</h3>
            <p class="text-gray-400 text-xs mb-6 leading-relaxed flex-grow">Visualização de grafos de conexões entre
                biologia e energia sutil.</p>
            <div class="flex items-center text-purple-400 text-xs font-bold tracking-widest uppercase">
                Explorar <i data-feather="chevron-right"
                    class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"></i>
            </div>
        </a>

        <!-- PubMed Card -->
        <div class="glass-card p-6 border-t border-blue-500/50 flex flex-col items-start">
            <div class="text-blue-400 mb-6 bg-blue-900/30 p-3 rounded"><i data-feather="book-open" class="w-6 h-6"></i>
            </div>
            <h3 class="text-lg font-bold text-white mb-2 font-mystic tracking-wider">PUBMED LINK</h3>
            <p class="text-gray-400 text-xs mb-6 leading-relaxed flex-grow">Acesso direto a repositórios de medicina
                baseada em evidências.</p>
            <div class="flex items-center text-blue-400 text-xs font-bold tracking-widest uppercase">
                Status: Online <i data-feather="check" class="w-3 h-3 ml-2"></i>
            </div>
        </div>

        <!-- Ghost Station Card -->
        <div class="glass-card p-6 border-t border-gray-500/50 flex flex-col items-start">
            <div class="text-gray-300 mb-6 bg-gray-800 p-3 rounded"><i data-feather="radio" class="w-6 h-6"></i></div>
            <h3 class="text-lg font-bold text-white mb-2 font-mystic tracking-wider">GHOST STATION</h3>
            <p class="text-gray-400 text-xs mb-6 leading-relaxed flex-grow">Pesquisa transversal de anomalias com
                suporte Gemini Vision e Scanners.</p>
            <div class="flex items-center text-gray-400 text-xs font-bold tracking-widest uppercase">
                Status: Online <i data-feather="check" class="w-3 h-3 ml-2"></i>
            </div>
        </div>
    </div>
</div>

<!-- AI ORACLE CHAT SECTION -->
<div class="max-w-3xl mx-auto px-4 mb-20">
    <div class="glass-card p-8 border-l-2 border-cyan-500 relative overflow-hidden">
        <!-- Background Glow -->
        <div class="absolute top-0 right-0 w-64 h-64 bg-cyan-900/10 rounded-full blur-3xl"></div>

        <!-- Avatar -->
        <div class="flex items-center space-x-4 mb-6 relative z-10">
            <div
                class="relative w-12 h-12 flex items-center justify-center bg-cyan-900/30 rounded border border-cyan-500/30">
                <i data-feather="cpu" class="text-cyan-400"></i>
                <div
                    class="absolute -bottom-1 -right-1 w-3 h-3 bg-cyan-400 rounded-full border-2 border-black z-20 animate-pulse">
                </div>
            </div>
            <div>
                <h3 class="text-lg font-bold text-cyan-50 font-mystic tracking-widest">
                    MEGA BRAIN INTERFACE
                </h3>
                <p class="text-[10px] text-cyan-500 font-mono tracking-widest">V4.0 // ONLINE // WAITING QUERY</p>
            </div>
        </div>

        <!-- Chat Response -->
        {% if chat_response %}
        <div class="mb-6 bg-white/5 rounded-xl p-4 text-sm leading-relaxed border border-white/10 relative z-10">
            {{ chat_response|linebreaksbr }}
        </div>
        {% else %}
        <div class="mb-6 bg-white/5 rounded-xl p-4 text-sm text-gray-400 italic border border-white/10 relative z-10">
            Pergunte sobre qualquer coisa: "O que é câncer?", "Por que tenho medo?", "Como funciona o coração?"...
        </div>
        {% endif %}

        <!-- Input -->
        <form action="/" method="GET" class="relative z-10">
            <input type="text" name="chat_msg" placeholder="Insira seu comando para acessar os bancos de dados..."
                value="{{ chat_input|default:'' }}"
                class="w-full bg-black/60 border border-cyan-900 rounded px-5 py-4 text-sm text-cyan-50 placeholder-cyan-900 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition font-mono">
            <button type="submit"
                class="absolute right-2 top-2 px-6 py-2 bg-cyan-900/50 border border-cyan-500/30 rounded hover:bg-cyan-800 transition text-cyan-400 text-xs font-bold tracking-widest uppercase flex items-center gap-2">
                <i data-feather="terminal" class="w-3 h-3"></i> Enviar
            </button>
        </form>
    </div>
</div>

<!-- QUICK ACCESS GRID -->
<div class="max-w-7xl mx-auto px-4 mb-20 relative z-10">
    <div class="grid md:grid-cols-3 gap-6">
        <!-- Bio-Systems -->
        <div class="glass-card p-6">
            <h3
                class="text-sm font-bold text-cyan-500 mb-4 border-b border-white/10 pb-3 flex items-center gap-2 uppercase tracking-widest">
                <i data-feather="database" class="w-4 h-4"></i> Bio-Sistemas
            </h3>
            <div class="space-y-2 max-h-64 overflow-y-auto custom-scrollbar pr-2">
                {% for sistema in sistemas %}
                <div
                    class="text-xs text-gray-400 hover:text-cyan-300 transition cursor-pointer py-1 flex justify-between items-center border-b border-white/5">
                    <span>{{ sistema.nome }}</span>
                    <span class="text-cyan-900 font-mono text-[10px]">[{{ sistema.orgaos.count }} DATABLOCKS]</span>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Emotions -->
        <div class="glass-card p-6">
            <h3
                class="text-sm font-bold text-purple-400 mb-4 border-b border-white/10 pb-3 flex items-center gap-2 uppercase tracking-widest">
                <i data-feather="activity" class="w-4 h-4"></i> Analítico Neural
            </h3>
            <div class="flex flex-wrap gap-2 max-h-64 overflow-y-auto custom-scrollbar">
                {% for emocao in emocoes %}
                <span class="px-2 py-1 text-[10px] uppercase tracking-wider rounded border 
                    {% if emocao.polaridade == 'POSITIVA' %}bg-green-500/10 border-green-500/30 text-green-400
                    {% else %}bg-red-500/10 border-red-500/30 text-red-400{% endif %}">
                    {{ emocao.nome }}
                </span>
                {% endfor %}
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="glass-card p-6">
            <h3
                class="text-sm font-bold text-gray-300 mb-4 border-b border-white/10 pb-3 flex items-center gap-2 uppercase tracking-widest">
                <i data-feather="server" class="w-4 h-4"></i> Status CORE
            </h3>
            <div class="space-y-4 text-xs font-mono">
                <div class="flex justify-between items-center">
                    <span class="text-gray-500">ENGINE_WEBGL</span>
                    <span class="text-cyan-400 flex items-center gap-2">
                        <div class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></div> ATIVO
                    </span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-500">PUBMED_NODE</span>
                    <span class="text-cyan-400 flex items-center gap-2">
                        <div class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></div> 12ms
                    </span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-500">SCHUMANN_SYNC</span>
                    <span class="text-purple-400 flex items-center gap-2">
                        <div class="w-1.5 h-1.5 bg-purple-400 rounded-full"></div> 7.83Hz
                    </span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-500">GHOST_STATION_API</span>
                    <span class="text-cyan-400 flex items-center gap-2">
                        <div class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></div> READY
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER CTA -->
<div class="max-w-4xl mx-auto px-4 text-center pb-20 relative z-10">
    <div class="glass-panel p-10 border-y-2 border-x-0 border-cyan-500/30">
        <i data-feather="cpu" class="w-8 h-8 mx-auto text-cyan-500 mb-4"></i>
        <h2 class="text-2xl font-bold mb-2 text-white font-mystic tracking-widest">INICIAR VARREDURA</h2>
        <p class="text-sm text-gray-500 mb-8 max-w-xl mx-auto">Carregue o motor gráfico 3D no navegador para mapear as
            interconexões sistêmicas de biologia quântica e bancos formais do PubMed.</p>
        <a href="/holograma/"
            class="inline-flex items-center gap-3 px-8 py-3 bg-cyan-500/10 border border-cyan-500 text-cyan-400 rounded text-xs font-bold tracking-widest uppercase hover:bg-cyan-500 hover:text-black transition-all">
            CARREGAR HOLOGRAMA <i data-feather="terminal" class="w-4 h-4"></i>
        </a>
    </div>
</div>

<!-- DNA Animation CSS -->
<style>
    .dna-strand {
        width: 4px;
        height: 100%;
        background: repeating-linear-gradient(0deg,
                transparent,
                transparent 10px,
                rgba(0, 255, 255, 0.3) 10px,
                rgba(0, 255, 255, 0.3) 20px,
                transparent 20px,
                transparent 30px,
                rgba(147, 51, 234, 0.3) 30px,
                rgba(147, 51, 234, 0.3) 40px);
        animation: dna-scroll 10s linear infinite;
    }

    @keyframes dna-scroll {
        0% {
            transform: translateY(0);
        }

        100% {
            transform: translateY(-50%);
        }
    }

    .animate-spin-slow {
        animation: spin 8s linear infinite;
    }
</style>

<!-- AUTO-SPEAK SCRIPT -->
{% if chat_response %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const text = "{{ chat_response|striptags|escapejs }}";

        function speak() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 1.1;
                utterance.pitch = 1.2;

                let voices = window.speechSynthesis.getVoices();
                function setFemaleVoice() {
                    const femaleVoice = voices.find(v =>
                        (v.lang === 'pt-BR' && (v.name.includes('Google') || v.name.includes('Luciana')))
                    );
                    if (femaleVoice) utterance.voice = femaleVoice;
                    else {
                        const ptVoice = voices.find(v => v.lang === 'pt-BR');
                        if (ptVoice) utterance.voice = ptVoice;
                    }
                    window.speechSynthesis.speak(utterance);
                }

                if (voices.length === 0) {
                    window.speechSynthesis.onvoiceschanged = () => {
                        voices = window.speechSynthesis.getVoices();
                        setFemaleVoice();
                    };
                } else {
                    setFemaleVoice();
                }
            }
        }
        setTimeout(speak, 500);
    });
</script>
{% endif %}
{% endblock %}