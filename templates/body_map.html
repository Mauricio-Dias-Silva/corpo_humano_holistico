{% extends 'base.html' %}
{% load static %}

{% block title %}Anatomia Realista Interativa{% endblock %}

{% block content %}
<div class="fixed inset-0 pt-16 flex justify-center items-center bg-black">

    <!-- Cinematic Background -->
    <div
        class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black opacity-80 pointer-events-none z-10">
    </div>

    <!-- Main Container -->
    <div class="relative h-[90vh] aspect-[9/16] pointer-events-auto shadow-2xl animate-fade-in">

        <!-- BASE IMAGE (REAL) -->
        <img src="{% static 'images/body_ref.png' %}"
            class="absolute inset-0 w-full h-full object-cover opacity-90 hover:opacity-100 transition duration-700"
            alt="Anatomia Humana">

        <!-- INTERACTIVE SVG OVERLAY -->
        <svg viewBox="0 0 100 100" class="absolute inset-0 w-full h-full z-20" preserveAspectRatio="none">
            <defs>
                <filter id="glow-hover">
                    <feGaussianBlur stdDeviation="1" result="coloredBlur" />
                    <feMerge>
                        <feMergeNode in="coloredBlur" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
            </defs>

            <!-- 1. BRAIN (Top) -->
            <path d="M 40 5 Q 50 2 60 5 Q 65 10 60 15 Q 50 18 40 15 Q 35 10 40 5" class="organ-zone"
                onclick="selectOrgan('CÃ©rebro', 'ðŸ§  Central de Comando', 'Dopamina & Serotonina', 'A ansiedade e o hiperfoco nascem aqui. Respire.')" />

            <!-- 2. LUNGS (Chest) -->
            <!-- Left Lung (Patient's Right) -->
            <path d="M 35 20 Q 45 20 48 30 Q 45 40 35 38 Q 28 35 30 25 Q 32 20 35 20" class="organ-zone"
                onclick="selectOrgan('PulmÃ£o Direito', 'ðŸ« Filtro Vital', 'OxigenaÃ§Ã£o', 'Armazena a tristeza. Respire fundo para soltar.')" />

            <!-- Right Lung (Patient's Left) -->
            <path d="M 65 20 Q 55 20 52 30 Q 55 40 65 38 Q 72 35 70 25 Q 68 20 65 20" class="organ-zone"
                onclick="selectOrgan('PulmÃ£o Esquerdo', 'ðŸ« Filtro Vital', 'OxigenaÃ§Ã£o', 'Sede da Alma CorpÃ³rea (Po).')" />

            <!-- 3. HEART (Center-Left) -->
            <path d="M 50 25 Q 55 22 58 28 Q 50 35 48 28 Q 45 25 50 25"
                class="organ-zone fill-red-500/0 hover:fill-red-500/40 hover:stroke-red-400"
                onclick="selectOrgan('CoraÃ§Ã£o', 'â¤ï¸ O Imperador', 'Campo EletromagnÃ©tico', '5000x mais forte que o cÃ©rebro. Sente antes de pensar.')" />

            <!-- 4. LIVER (Patient's Right - our Left) -->
            <path d="M 35 40 Q 45 38 48 45 Q 45 52 35 50 Q 30 45 35 40"
                class="organ-zone fill-yellow-500/0 hover:fill-yellow-500/40 hover:stroke-yellow-400"
                onclick="selectOrgan('FÃ­gado', 'âš¡ O General', 'DesintoxicaÃ§Ã£o', 'AÃ§Ã£o e ExecuÃ§Ã£o. Raiva acumulada bloqueia este Ã³rgÃ£o.')" />

            <!-- 5. STOMACH (Patient's Left - our Right) -->
            <path d="M 55 42 Q 65 40 62 50 Q 55 52 52 48" class="organ-zone"
                onclick="selectOrgan('EstÃ´mago', 'ðŸ¥£ O Processador', 'DigestÃ£o Ãcida', 'Digerir a vida. Ansiedade gera gastrite.')" />

            <!-- 6. INTESTINES (Center) -->
            <path d="M 40 55 Q 60 55 60 70 Q 50 75 40 70 Q 35 60 40 55" class="organ-zone"
                onclick="selectOrgan('Intestinos', 'ðŸŒ€ Segundo CÃ©rebro', 'Serotonina & Imunidade', 'IntuiÃ§Ã£o visceral. Produz 90% da sua felicidade quÃ­mica.')" />

            <!-- 7. KIDNEYS (Back - approximated sides) -->
            <circle cx="38" cy="50" r="3" class="organ-zone hover:fill-blue-500/50"
                onclick="selectOrgan('Rim Direito', 'ðŸ’§ Bateria Vital', 'Jing (Ancestral)', 'Filtra o Medo.')" />
            <circle cx="62" cy="50" r="3" class="organ-zone hover:fill-blue-500/50"
                onclick="selectOrgan('Rim Esquerdo', 'ðŸ’§ Bateria Vital', 'Jing (Ancestral)', 'Filtra o Medo.')" />

            <!-- 8. THYROID (Neck) -->
            <path d="M 45 12 Q 50 15 55 12 Q 52 18 50 18 Q 48 18 45 12" class="organ-zone hover:fill-purple-500/40"
                onclick="selectOrgan('Tireoide', 'ðŸ¦‹ O Escudo', 'Metabolismo Temporal', 'Traumas de humilhaÃ§Ã£o. engolir sapo. Regula o tempo interno.')" />

            <!-- 9. THYMUS (Chest Center - High Heart) -->
            <circle cx="50" cy="22" r="2.5" class="organ-zone hover:fill-green-400/50"
                onclick="selectOrgan('Timo', 'ðŸ›¡ï¸ Guerreiro Espiritual', 'MaturaÃ§Ã£o T', 'Chakra do Alto CoraÃ§Ã£o. Imunidade ligada ao propÃ³sito de vida.')" />

            <!-- 10. SPLEEN (Left side - Our Right) -->
            <path d="M 68 45 Q 75 45 72 52 Q 65 50 68 45" class="organ-zone hover:fill-orange-800/50"
                onclick="selectOrgan('BaÃ§o', 'ðŸ©¸ O Banco de Sangue', 'PreocupaÃ§Ã£o', 'Filtra o sangue e a obsessÃ£o. Excesso de pensamento (ruminaÃ§Ã£o) fere o baÃ§o.')" />

            <!-- 11. GALLBLADDER (Under Liver - Right) -->
            <circle cx="42" cy="48" r="2" class="organ-zone hover:fill-green-600/60"
                onclick="selectOrgan('VesÃ­cula Biliar', 'âš–ï¸ O Decisor', 'Bile (Amargor)', 'Armazena a coragem para decidir. HesitaÃ§Ã£o e amargura bloqueiam aqui.')" />

            <!-- 12. PANCREAS (Central Deep) -->
            <path d="M 45 48 Q 55 45 60 48 Q 55 52 45 50" class="organ-zone hover:fill-yellow-300/40"
                onclick="selectOrgan('PÃ¢ncreas', 'ðŸ¬ A DoÃ§ura da Vida', 'Insulina/Glucagon', 'Ansiedade por controle. Perda da doÃ§ura da vida (Diabetes).')" />

            <!-- 13. BLADDER / REPRODUCTIVE (Low Center) -->
            <path d="M 45 80 Q 50 85 55 80 Q 50 90 45 80" class="organ-zone hover:fill-pink-500/40"
                onclick="selectOrgan('Bexiga & Reprodutor', 'ðŸŒ¸ O CÃ¡lice', 'TerritÃ³rio & CriaÃ§Ã£o', 'Conflitos de territÃ³rio (Bexiga) e FrustraÃ§Ã£o sexual/criativa (Reprodutor).')" />

            <!-- 14. APPENDIX (Lower Right - Our Left) -->
            <circle cx="35" cy="75" r="1.5" class="organ-zone hover:fill-red-400/50"
                onclick="selectOrgan('ApÃªndice', 'ðŸ¦  Arquivo Seguro', 'Reserva Bacteriana', 'Inflama quando hÃ¡ raiva sem saÃ­da ou beco emocional.')" />

        </svg>

        <!-- SCANNER HUD LINE -->
        <div
            class="absolute top-0 w-full h-1 bg-cyan-400/50 shadow-[0_0_20px_cyan] animate-scan z-30 opacity-50 pointer-events-none">
        </div>
    </div>

    <!-- DATA PANEL (Floating Glass) -->
    <div id="data-panel"
        class="absolute bottom-10 right-10 w-96 bg-black/60 backdrop-blur-xl border-l-4 border-cyan-500 p-6 rounded-r-xl transform translate-x-full transition-transform duration-500 opacity-0">
        <h2 id="panel-title" class="text-3xl font-bold text-white mb-1">...</h2>
        <h3 id="panel-sub" class="text-cyan-400 uppercase tracking-widest text-xs mb-4">...</h3>

        <div class="flex items-center space-x-3 mb-4">
            <div class="w-10 h-10 rounded-full bg-cyan-900/50 flex items-center justify-center text-cyan-200 text-xl">ðŸ§¬
            </div>
            <div>
                <p class="text-[10px] text-gray-400 uppercase">FunÃ§Ã£o Principal</p>
                <p id="panel-func" class="text-sm text-gray-200">...</p>
            </div>
        </div>

        <p id="panel-desc" class="text-gray-300 text-sm leading-relaxed border-t border-white/10 pt-4">...</p>

        <div class="mt-4 flex justify-end">
            <button onclick="closePanel()"
                class="text-xs text-white/50 hover:text-white uppercase tracking-widest">Fechar Scanner</button>
        </div>
    </div>

</div>

<style>
    .organ-zone {
        fill: transparent;
        stroke: transparent;
        stroke-width: 0.5;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .organ-zone:hover {
        fill: rgba(0, 255, 255, 0.2);
        stroke: rgba(0, 255, 255, 0.6);
        filter: drop-shadow(0 0 10px cyan);
    }

    @keyframes scan {
        0% {
            top: 0%;
            opacity: 0;
        }

        10% {
            opacity: 0.8;
        }

        90% {
            opacity: 0.8;
        }

        100% {
            top: 100%;
            opacity: 0;
        }
    }

    .animate-scan {
        animation: scan 4s linear infinite;
    }

    .animate-fade-in {
        animation: fadeIn 1s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }
</style>

<script>
    function selectOrgan(title, sub, func, desc) {
        const panel = document.getElementById('data-panel');
        document.getElementById('panel-title').innerText = title;
        document.getElementById('panel-sub').innerText = sub;
        document.getElementById('panel-func').innerText = func;
        document.getElementById('panel-desc').innerText = desc;

        panel.classList.remove('translate-x-full', 'opacity-0');
    }
    function closePanel() {
        document.getElementById('data-panel').classList.add('translate-x-full', 'opacity-0');
    }
</script>
{% endblock %}